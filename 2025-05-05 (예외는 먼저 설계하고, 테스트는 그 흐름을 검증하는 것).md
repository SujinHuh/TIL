# 📅 2025-05-05 (예외는 먼저 설계하고, 테스트는 그 흐름을 검증하는 것)

### 🎯 목표
1. 코드 수정  
2. 블로그 작성  
3. Log를 어떤 식으로 쓸지 고민  
4. 오브젝트 책 읽기  

---

### ✅ 완료
1. 코드 수정  
   - `GlobalExceptionHandler` 예외 등록  
2. 오브젝트 책 6장  
   - **명령-쿼리 분리 원칙 (Command-Query Separation)**  
     - **명령(Command)**: 객체의 상태를 변경하는 메시지  
     - **쿼리(Query)**: 객체의 상태를 반환하는 메시지  
     - 명령과 쿼리를 명확히 분리해서 예측 가능한 협력 구조 설계  

---

### ⏱ 공부 시간  
**총 7시간**

---

### ✨ 회고  

> **에러 상황은 테스트 코드에서 바로 구성하는 게 아니라,  
> 먼저 메서드에서 예외 처리 설계를 하고 나서,  
> 예상 가능한 흐름 안에서 테스트해야 한다는 것.**

테스트 코드를 작성하다가 **예외 상황을 고려하지 못한 채, 성공 흐름만 테스트**하고 있었다.  
API 스펙에 400, 404, 500 같은 예외 상황을 명시해두었지만,  
정작 코드에는 예외 처리가 빠져 있었고, 테스트에서도 검증하지 않았다.

이번에 `GlobalExceptionHandler`를 등록하고  
**기존 메서드 내부에서 예외 처리 흐름을 먼저 설계**한 후,  
그에 맞춰 테스트 코드를 작성했다.

멘토님 피드백을 통해 확실히 알게 된 점:  
- 테스트는 단순히 실패 상황을 만드는 게 아니라  
  **내가 예상한 흐름을 검증하는 용도로 작성되어야 한다.**  
- 예상하지 못한 에러는 **설계 누락**이며,  
  그런 경우는 테스트로 커버하는 게 아니라 **코드 자체를 수정해야 하는 문제**다.

예전엔 예외가 생기면 무지성으로 따라치며 대처했다면,  
**이제는 예외 상황도 스펙처럼 설계의 일부로 생각하고 다루게 됐다.**
